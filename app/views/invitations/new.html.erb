<div class="max-w-md mx-auto mt-10 p-6 bg-white rounded-lg shadow-md">
  <h1 class="text-2xl font-bold mb-6">Invite Team Members</h1>

  <%= form_tag invitations_path, method: :post, data: { controller: "invitations" } do %>
    <div id="invitation-fields" class="space-y-4">
      <div class="invitation-row">
        <%= fields_for "invitations[]", Invitation.new do |f| %>
          <div class="mb-4">
            <%= f.label :name, "Name", class: "block text-sm font-medium text-gray-700" %>
            <%= f.text_field :name, required: true, class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" %>
          </div>
          <div class="mb-4">
            <%= f.label :email, "Email", class: "block text-sm font-medium text-gray-700" %>
            <%= f.email_field :email, required: true, class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" %>
          </div>
        <% end %>
      </div>
    </div>

    <div class="mt-6 flex space-x-4">
      <button type="button" 
              data-action="click->invitations#addRow"
              class="px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300">
        Add Another Person
      </button>
      <%= submit_tag "Send Invitations", class: "px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700" %>
    </div>
  <% end %>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const addButton = document.querySelector('button[data-action="click->invitations#addRow"]');
  if (addButton) {
    addButton.addEventListener('click', function(event) {
      event.preventDefault();
      
      // Nájdenie prvého riadku, ktorý sa bude klonovať
      const template = document.querySelector('.invitation-row');
      if (!template) {
        console.error("Template not found");
        return;
      }
      
      // Klonovanie riadku
      const newRow = template.cloneNode(true);
      
      // Vyčistenie hodnôt v inputoch
      const inputs = newRow.querySelectorAll('input');
      inputs.forEach(input => {
        input.value = '';
      });
      
      // Pridanie nového riadku do kontajnera
      const container = document.getElementById('invitation-fields');
      if (container) {
        container.appendChild(newRow);
      } else {
        console.error("Container not found");
      }
    });
  } else {
    console.error("Add button not found");
  }
});
</script> 